<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dragon Ball Z Search</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            background-image: url(dragon.jpeg);
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        /* Navbar */
        .navbar {
            background-color: #FA812F;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }

        /* Buttons */
        .btn {
            background-color: #FEF3E2;
            color: #DD0303;
            border: 2px solid #FEF3E2;
            font-weight: 700;
            transition: all 0.3s ease-in-out;
        }

        .btn:hover {
            background-color: #DD0303;
            color: #FEF3E2;
            border-color: #DD0303;
            box-shadow: 0 6px 15px rgba(221, 3, 3, 0.6);
            transform: translateY(-2px);
        }

        /* Autocomplete */
        .autocomplete-items {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            z-index: 99;
            border-radius: 5px;
            overflow: hidden;
            background: linear-gradient(135deg, #ff6600, #ffcc33);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.6);
            max-height: 300px;
            overflow-y: auto;
            font-weight: bold;
            color: #fff;
            border: 2px solid #ffdd66;
            transition: all 0.3s ease-in-out;
        }

        .autocomplete-item {
            padding: 12px 15px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .autocomplete-item:hover {
            background: radial-gradient(circle at center, #ffdd66, #ff6600);
            color: #000;
            transform: scale(1.05);
            text-shadow: 1px 1px 3px #fff;
        }

        .autocomplete-items::-webkit-scrollbar {
            width: 8px;
        }

        .autocomplete-items::-webkit-scrollbar-track {
            background: #ffcc33;
            border-radius: 8px;
        }

        .autocomplete-items::-webkit-scrollbar-thumb {
            background: #ff6600;
            border-radius: 8px;
        }

        .autocomplete-items::-webkit-scrollbar-thumb:hover {
            background: #dd3300;
        }

        /* Cards */
        .cards-container {
            display: flex;
            flex-wrap: wrap;
            gap: 25px;
            margin: 20px;
            justify-content: center;
        }

        .card {
            width: 220px;
            border-radius: 15px;
            overflow: hidden;
            background: linear-gradient(145deg, #ffcc33, #ff6600);
            color: #fff;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.6), 0 0 15px #ffdd66 inset;
            transition: transform 0.3s, box-shadow 0.3s;
            border: none;
            font-weight: bold;
            position: relative;
        }

        .card::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #ff0, #f00, #ff0, #f90);
            border-radius: 17px;
            z-index: -1;
            filter: blur(8px);
            opacity: 0.7;
            transition: opacity 0.3s;
        }

        .card:hover::before {
            opacity: 1;
            filter: blur(12px);
        }

        .card:hover {
            transform: translateY(-10px) scale(1.05);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.7), 0 0 20px #fff inset;
        }

        .card-img-top {
            width: 100%;
            height: 250px;
            object-fit: contain;
            background-color: #000;
            border-bottom: 3px solid #fff;
        }

        .card-body {
            padding: 15px;
            text-align: center;
        }

        .card-title {
            font-size: 1.2rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px #000;
        }

        .card-text {
            font-size: 0.9rem;
            text-shadow: 1px 1px #000;
        }

        /* Heading */
        .nameheading {
            margin: 30px 0;
            padding: 20px;
            background: radial-gradient(circle at top left, #ffcc33, #ff6600);
            border-radius: 25px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.7), 0 0 15px #ffdd66 inset;
            animation: glowHeading 2s infinite alternate;
            text-align: center;
        }

        .nameheading h1,
        .nameheading h2 {
            color: #fff;
            text-shadow: 2px 2px 5px #000, 0 0 10px #ffdd66, 0 0 20px #ff6600;
            margin: 10px 0;
        }

        .nameheading h1 {
            font-size: 2.5rem;
            letter-spacing: 2px;
        }

        .nameheading h2 {
            font-size: 1.2rem;
            font-weight: bold;
            letter-spacing: 1px;
            opacity: 0.9;
        }

        @keyframes glowHeading {
            0% {
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.7), 0 0 15px #ffdd66 inset;
            }

            50% {
                box-shadow: 0 12px 35px rgba(0, 0, 0, 0.8), 0 0 25px #ffdd66 inset;
            }

            100% {
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.7), 0 0 15px #ffdd66 inset;
            }
        }

        /* Mobile search bar wrapper */
        .mobile-search {
            display: none;
            justify-content: center;
            padding: 10px 15px;
            background-color: #FA812F;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }

        .mobile-search .searchbar {
            width: 80%;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .navbar {
                display: none;
            }

            .mobile-search {
                display: flex !important;
            }
        }
    </style>
</head>

<body>

    <!-- Desktop Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">Dragon Ball Z</a>
            <div class="collapse navbar-collapse">
                <form class="d-flex ms-auto position-relative" id="searchForm">
                    <input class="form-control me-2 searchbar" type="search" placeholder="Search" aria-label="Search">
                    <button class="btn" type="submit">Search</button>
                    <div id="autocomplete-list" class="autocomplete-items"></div>
                </form>
            </div>
        </div>
    </nav>

    <!-- Mobile Search Bar -->
    <div class="mobile-search">
        <form class="d-flex position-relative" id="mobileSearchForm">
            <input class="form-control me-2 searchbar" type="search" placeholder="Search" aria-label="Search">
            <button class="btn" type="submit">Search</button>
            <div id="mobile-autocomplete-list" class="autocomplete-items"></div>
        </form>
    </div>

    <div class="nameheading">
        <h1>Search for the Dragon Ball Z character</h1>
        <h5>Created by K.Stephen Moses B.Tech,B.Sc,PG</h5>
    </div>

    <div class="cards-container" id="cardsContainer"></div>

    <script>
        const character_array = [
            "Goku", "Vegeta", "Piccolo", "Bulma", "Freezer", "Zarbon", "Dodoria", "Ginyu", "Celula", "Gohan", "Krillin",
            "Tenshinhan", "Yamcha", "Chi-Chi", "Gotenks", "Trunks", "Master Roshi", "Bardock", "Launch", "Mr.Satan",
            "Dende", "Android 17", "Android 16", "Android 19", "Android 20", "Android 13", "Android 14", "Android 15", "Nail", "Raditz",
            "Babidi", "Majin Buu", "Bills", "Whis", "Zeno", "Kibito-Shin", "Jiren", "Toppo", "Dyspo", "Marcarita", "Vermoudh", "Grand Priest",
            "Kaio del norte (Kaito)", "Android 18", "Gogeta", "Vegetto", "Janemba", "Broly", "Kaio del Sur", "Kaio del este", "Kaio del Oesta",
            "Gran Kaio", "Kaio-shin del Este", "Kaio-shin del norte", "Kaio-shin del Sur", "Kaio-shin del Oeste", "Gran Kaio-shin", "Kibito"
        ];

        const cardsContainer = document.getElementById("cardsContainer");

        // Common function for autocomplete
        function setupAutocomplete(input, listContainer) {
            input.addEventListener("input", function () {
                const value = this.value.toLowerCase();
                listContainer.innerHTML = "";
                if (!value) return;

                const filtered = character_array.filter(name => name.toLowerCase().includes(value));
                filtered.forEach(name => {
                    const item = document.createElement("div");
                    item.classList.add("autocomplete-item");
                    item.innerText = name;
                    item.addEventListener("click", function () {
                        input.value = name;
                        listContainer.innerHTML = "";
                        fetchCharacter(name);
                    });
                    listContainer.appendChild(item);
                });
            });

            document.addEventListener("click", function (e) {
                if (e.target !== input) listContainer.innerHTML = "";
            });
        }

        // Setup desktop and mobile autocomplete
        setupAutocomplete(document.querySelector("#searchForm .searchbar"), document.getElementById("autocomplete-list"));
        setupAutocomplete(document.querySelector("#mobileSearchForm .searchbar"), document.getElementById("mobile-autocomplete-list"));

        // Common search submit
        function setupSearchForm(form, input, listContainer) {
            form.addEventListener("submit", function (e) {
                e.preventDefault();
                const searchValue = input.value.trim();
                if (searchValue) fetchCharacter(searchValue);
                listContainer.innerHTML = "";
            });
        }

        setupSearchForm(document.getElementById("searchForm"), document.querySelector("#searchForm .searchbar"), document.getElementById("autocomplete-list"));
        setupSearchForm(document.getElementById("mobileSearchForm"), document.querySelector("#mobileSearchForm .searchbar"), document.getElementById("mobile-autocomplete-list"));

        // Fetch character data
        async function fetchCharacter(name) {
            try {
                const index = character_array.findIndex(n => n.toLowerCase() === name.toLowerCase());
                if (index === -1) {
                    alert("Character not found!");
                    return;
                }

                const id = index + 1;
                const response = await fetch(`https://dragonball-api.com/api/characters/${id}`);
                const data = await response.json();

                cardsContainer.innerHTML = "";

                const mainCard = document.createElement("div");
                mainCard.classList.add("card");
                mainCard.innerHTML = `
                    <img src="${data.image}" class="card-img-top" alt="${data.name}">
                    <div class="card-body">
                        <h5 class="card-title">${data.name}</h5>
                        <p class="card-text"><strong>Race:</strong> ${data.race || "Unknown"}</p>
                        <p class="card-text"><strong>Status:</strong> ${data.status || "Unknown"}</p>
                    </div>`;
                cardsContainer.appendChild(mainCard);

                if (data.transformations && data.transformations.length > 0) {
                    data.transformations.forEach(trans => {
                        const card = document.createElement("div");
                        card.classList.add("card");
                        card.innerHTML = `
                            <img src="${trans.image}" class="card-img-top" alt="${trans.name}">
                            <div class="card-body">
                                <h5 class="card-title">${trans.name}</h5>
                                <p class="card-text"><strong>Ki:</strong> ${trans.ki || "Unknown"}</p>
                            </div>`;
                        cardsContainer.appendChild(card);
                    });
                }
            } catch (error) {
                console.error("Error fetching character data:", error);
            }
        }
    </script>
</body>

</html>
